var IngrowEventGrabber=function(e){"use strict";var n,t,o=(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t,o=arguments[n];for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},n=function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e};function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a=(n(i,null,[{key:"getRandomString",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<32;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}},{key:"setCookie",value:function(e){var n=i.getRandomString();return document.cookie=e+"="+n,n}},{key:"getCookie",value:function(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var r=t[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(n))return r.substring(n.length,r.length)}return""}},{key:"checkCookie",value:function(e){return""!=i.getCookie(e)}}]),i);function i(){r(this,i)}n(s,[{key:"sendEvent",value:function(e,n){return fetch(this.apiEndpoint+"/v1",{method:"POST",headers:{"api-key":this.apiKey},body:JSON.stringify({ingrow:{stream:e,project:this.projectID},enrichment:[{name:"session",input:{anonymous_id:this.anonymousId,user_id:2<arguments.length&&void 0!==arguments[2]?arguments[2]:""}}],event:t({},this.IP,n)})})}}]),n=s;function s(e,n){r(this,s),this.apiKey=e,this.projectID=n,this.apiEndpoint="https://event.ingrow.co",this.anonymousId=a.checkCookie("ingrow_events_anonymous_id")?a.getCookie("ingrow_events_anonymous_id"):a.setCookie("ingrow_events_anonymous_id"),this.ip={IP:"autofill"}}e.default=n}((n={exports:{}},n.exports)),n.exports);(t=o)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default;var d=o;function s(e){var{nodeName:n,id:t,className:o}=e;return{path:function(e){for(var n=[];null!=e.parentNode;){for(var t=0,o=0,r=0;r<e.parentNode.childNodes.length;r++){var a=e.parentNode.childNodes[r];a.nodeName==e.nodeName&&(a===e&&(o=t),t++)}e.hasAttribute("id")&&""!=e.id?n.unshift(e.nodeName.toLowerCase()+"#"+e.id):1<t?n.unshift(e.nodeName.toLowerCase()+":eq("+o+")"):n.unshift(e.nodeName.toLowerCase()),e=e.parentNode}const i=n.slice(1);return i&&i.length?i.join(">"):""}(e),nodeName:n,id:t,className:o}}let u={};function r(o){return e=>{var{target:n,clientX:t,clientY:e}=e;u={isTouch:o,x:t,y:e,...s(n)}}}function a(a,i){return function(e){var{target:n,clientX:t,clientY:o}=e,r=t-u.x,e=o-u.y,e=r*r+e*e^!0?i?"tap":"click":"drag",e={isTouch:i,x:t,y:o,...s(n),action:e};a(e)}}function c(e){const n=document.body.addEventListener;n("mousedown",r(e)),n("touchstart",r(e)),n("mouseup",a(e)),n("touchend",a(e,!0))}function l(n){document.addEventListener("DOMContentLoaded",()=>{n({action:"load"})});const e=window.addEventListener;e("beforeunload",function(e){n({action:"load"})}),e("unload",function(e){n({action:"load"})})}function f(o){window.onerror=function(e,n,t){o({error:e,url:n,line:t})}}var i=300,v=[];function h(e){for(var n=0;n<v.length;n++)v[n](e)}function p(n){b.addEventListener(n,function e(){m[n]=!0,b.removeEventListener(n,e,!1)},!1)}var m,g,y,w=window.MutationObserver||window.WebKitMutationObserver,b=document.documentElement;w?new w(h).observe(b,{childList:!0,subtree:!0}):(m={},window.addEventListener&&(p("DOMSubtreeModified"),p("DOMNodeInserted"),p("DOMNodeRemoved")),m.DOMNodeInserted?window.addEventListener("DOMContentLoaded",function(){m.DOMSubtreeModified?b.addEventListener("DOMSubtreeModified",h,!1):(b.addEventListener("DOMNodeInserted",h,!1),b.addEventListener("DOMNodeRemoved",h,!1))},!1):document.onpropertychange?document.onpropertychange=h:(g=document.getElementsByTagName("*"),y=g.length,setTimeout(function e(){var n=document.getElementsByTagName("*"),t=n.length;t!=y&&(g=[]);for(var o=0;o<t;o++)if(n[o]!==g[o]){h(),g=n,y=t;break}setTimeout(e,i)},i)));const N=200;function D(o){var e,n;e=e=>{const n=[],t=[];e.forEach(e=>e.addedNodes.length&n.push(...e.addedNodes)),e.forEach(e=>e.removedNodes.length&t.push(...e.removedNodes)),o({addedNodes:n,removedNodes:t})},(n=N)&&(i=n),v.push(e)}return e.autoGrabber=function(e,r,t=[]){if(t&&!Array.isArray(t))throw"should pass an array to the middlewares";let o;if(e&&e.projectID&&e.apiKey){var{projectID:n,apiKey:a,userID:i}=e;o=new(d.default||d)(n,a,i)}else{if(!e?.sendEvent)throw`autoGrabber( first parameter ingrow should be an instance of Ingrow class as following
    ingrow = new Ingrow(apiKey: "API_KEY", projectID: "PROJECT_ID", user: "" )

    or contains ingrow sdk configs like bellow
    ingrow = { apiKey: "API_KEY", projectID: "PROJECT_ID", userID: "" }`;o=e}const s=[{type:"mouse",stream:"events",sendDeviceInfo:!1,capture:c},{type:"page",stream:"events",sendDeviceInfo:!0,capture:l},{type:"domChange",stream:"events",sendDeviceInfo:!1,capture:D},{type:"error",stream:"events",sendDeviceInfo:!1,capture:f}];r&&t.push((e,n)=>{let t=r[e.type]?.rate;var o;t=-1<t?t:1,o=t,Math.random()<o&&n(e)}),t.push((e,n)=>{o.sendEvent(e.stream,e.eventData,e.sendDeviceInfo)}),s.forEach(n=>{n.capture(e=>{n.eventData=e,function n(t,o){t.length&&t[0](o,e=>{n(t.slice(1),e||o)})}(t,e)})})},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
